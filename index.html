<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>corousel</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container" data-autoplay="true">
      <div class="slide">
        <div class="part1">
          <h1 class="heading-hide">slide1</h1>
        </div>
        <div class="part2">
          <div class="box box-hide"></div>
        </div>
      </div>
      <!-- ... (other slides) -->

      <div class="slide">
        <div class="part1">
          <h1 class="heading-hide">slide2</h1>
        </div>
        <div class="part2">
          <div class="box box-hide"></div>
        </div>
      </div>
      <div class="slide">
        <div class="part1">
          <h1 class="heading-hide">slide3</h1>
        </div>
        <div class="part2">
          <div class="box box-hide"></div>
        </div>
      </div>
      <div class="slide">
        <div class="part1">
          <h1 class="heading-hide">slide4</h1>
        </div>
        <div class="part2">
          <div class="box box-hide"></div>
        </div>
      </div>

      <button class="prev" onclick="prev()">
        <i class="fa fa-angle-left"></i>
      </button>
      <button class="next" onclick="next()">
        <i class="fa fa-angle-right"></i>
      </button>
      <div class="dots_container" id="indicator"></div>
    </div>

    <script>
      var slide = document.getElementsByClassName("slide");
      var indicator = document.getElementById("indicator");
      var dots = document.getElementsByClassName("dots");
      var autoplay = document
        .getElementsByClassName("container")[0]
        .getAttribute("data-autoplay");
      var l = slide.length;
      var interval = 10000;
      var set;

      window.onload = function () {
        initialize();
        slide[0].style.opacity = "1";
        for (var j = 0; j < l; j++) {
          indicator.innerHTML +=
            "<div class='dots' onclick=change(" + j + ")></div>";
        }

        dots[0].style.background = "#696969";
      };

      function initialize() {
        if (autoplay === "true")
          set = setInterval(function () {
            next();
          }, interval);
      }

      function change(index) {
        clearInterval(set);
        count = index;
        for (var j = 0; j < l; j++) {
          slide[j].style.opacity = "0";
          dots[j].style.background = "#bdbdbd";
        }
        slide[count].style.opacity = "1";
        dots[count].style.background = "#696969";
      }

      var count = 0;
      function next() {
        clearInterval(set);
        slide[count].style.opacity = "0";
        count++;
        for (var j = 0; j < l; j++) {
          dots[j].style.background = "#bdbdbd";
        }

        if (count == l) {
          count = 0;
          slide[count].style.opacity = "1";
          dots[count].style.background = "#696969";
        } else {
          slide[count].style.opacity = "1";
          dots[count].style.background = "#696969";
        }
        initialize();
      }

      function prev() {
        clearInterval(set);
        slide[count].style.opacity = "0";
        for (var j = 0; j < l; j++) {
          dots[j].style.background = "#bdbdbd";
        }
        count--;

        if (count == -1) {
          count = l - 1;
          slide[count].style.opacity = "1";
          dots[count].style.background = "#696969";
        } else {
          slide[count].style.opacity = "1";
          dots[count].style.background = "#696969";
        }
        initialize();
      }

      function observeElements(elements, className) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              entry.target.classList.toggle(className, entry.isIntersecting);
            });
          },
          {
            // Add your options here if needed
            // threshold: 0.1,
          }
        );

        elements.forEach((element) => {
          observer.observe(element);
        });
      }

      // heading
      const heading = document.querySelectorAll(".heading-hide");
      observeElements(heading, "heading-show");
      // box
      const box = document.querySelectorAll(".box-hide");
      observeElements(box, "box-show");
    </script>
  </body>
</html>
